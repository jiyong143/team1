<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kh.team1.dao.SurportDAO">

<!-- 게시글 리스트 mapper 시작-->
<select id="selectSurportList" resultType="kr.kh.team1.model.vo.SurportVO">
    SELECT *
    FROM surport
    <!-- 
    <where>
        <if test='cris.type == "all"'>
            AND (su_title LIKE CONCAT('%', #{cris.search}, '%')
            OR su_content LIKE CONCAT('%', #{cris.search}, '%')
            OR su_me_id LIKE CONCAT('%', #{cris.search}, '%'))
        </if>
        <if test='cris.type == "title"'>
            AND (su_title LIKE CONCAT('%', #{cris.search}, '%')
            OR su_content LIKE CONCAT('%', #{cris.search}, '%'))
        </if>
        <if test='cris.type == "writer"'>
            AND su_me_id LIKE CONCAT('%', #{cris.search}, '%')
        </if>
    </where>
    ORDER BY ${cris.order} DESC
    LIMIT #{cris.pageStart}, #{cris.perPageNum}
     -->
</select>


<select id="selectSurportTotalCount" resultType="int">
    SELECT COUNT(*)
    FROM surport
    <!-- 
    <where>
        <if test='cris.type == "all"'>
            AND (su_title LIKE CONCAT('%', #{cris.search}, '%')
            OR su_content LIKE CONCAT('%', #{cris.search}, '%')
            OR su_me_id LIKE CONCAT('%', #{cris.search}, '%'))
        </if>
        <if test='cris.type == "title"'>
            AND su_title LIKE CONCAT('%', #{cris.search}, '%')
        </if>
        <if test='cris.type == "content"'>
            AND su_content LIKE CONCAT('%', #{cris.search}, '%')
        </if>
        <if test='cris.type == "writer"'>
            AND su_me_id LIKE CONCAT('%', #{cris.search}, '%')
        </if>
    </where>
     -->
</select>


<!-- 고객관리 리스트 문의사항,이용조항,사기조항,거래조항 -->
<select id="selectSurportManageList" resultType="kr.kh.team1.model.vo.SurportManageVO">
	select * from suport_manage
</select>


<!-- 고객문의 입력 -->
<insert id="insertSurport" useGeneratedKeys="true" keyProperty="surport.su_num">
	insert into surport(su_me_id, su_title, su_content)
	values(#{surport.su_me_id},#{surport.su_title},#{surport.su_content})
</insert>

<update id="updateView">
	update surport set su_view = su_view + 1 where su_num = #{su_num}
</update>

<select id="selectSurport" resultType="kr.kh.team1.model.vo.SurportVO">
	select * from surport where su_num = #{su_num}
</select>

<update id="updateSurport">
	update surport set su_num
</update>


   
</mapper>
