<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kh.team1.dao.SurportDAO">
<select id="selectSurportList" resultType="kr.kh.team1.model.vo.SurportVO">
	select * 
		from surport
		<!-- 
		<if test='cri.type == "all"'>
			where su_title like concat('%', #{cri.search}, '%')
			or su_content like concat('%', #{cri.search}, '%')
			or su_me_id like concat('%', #{cri.search}, '%')
		</if>
		<if test='cri.type == "title"'>
  			where su_title like concat('%', #{cri.search}, '%')
  			or su_content like concat('%', #{cri.search}, '%')
  		</if>
  		<if test='cri.type == "writer"'>
  			where su_me_id like concat('%', #{cri.search}, '%')
  		</if>
  		order by ${cri.order} desc
  		limit #{cri.pageStart}, #{cri.perPageNum}
  		 -->
</select>

<select id="selectSurportTotalCount" resultType="int">
	select count(*) 
		from surport
		<!-- 
		<if test='cri.type == "all"'>
  			where su_title like concat('%', #{cri.search}, '%')
  			or su_content like concat('%', #{cri.search}, '%')
  			or su_me_id like concat('%', #{cri.search}, '%')
  		</if>
  		<if test='cri.type == "title"'>
  			where su_title like concat('%', #{cri.search}, '%')
  			or su_content like concat('%', #{cri.search}, '%')
  		</if>
  		<if test='cri.type == "writer"'>
  			where su_me_id like concat('%', #{cri.search}, '%')
  		</if>
  		 -->
</select>

<select id="selectSurportManageList" resultType="kr.kh.team1.model.vo.SurportManageVO">
	select * from suport_manage
</select>

<insert id="insertSurport" useGeneratedKeys="true" keyProperty="surport.su_num">
	insert into surport(su_title, su_content, su_me_id, su_sm_num)
	values(#{surport.su_title},#{surport.su_content},#{surport.su_me_id},#{surport.su_sm_num})
</insert>

<update id="updateView">
	update surport set su_view where su_num = #{num}
</update>
   
</mapper>
